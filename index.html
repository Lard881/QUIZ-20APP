<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello world project</title>
    <script>
      // Comprehensive ResizeObserver error suppression
      (function () {
        // Store original console methods
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;

        // Override console.error
        console.error = function (...args) {
          const message = args[0];
          if (
            typeof message === "string" &&
            (message.includes(
              "ResizeObserver loop completed with undelivered notifications",
            ) ||
              message.includes("ResizeObserver loop limit exceeded"))
          ) {
            return; // Suppress ResizeObserver errors
          }
          originalConsoleError.apply(console, args);
        };

        // Override console.warn for ResizeObserver warnings
        console.warn = function (...args) {
          const message = args[0];
          if (
            typeof message === "string" &&
            message.includes("ResizeObserver")
          ) {
            return; // Suppress ResizeObserver warnings
          }
          originalConsoleWarn.apply(console, args);
        };

        // Handle unhandled promise rejections
        window.addEventListener("unhandledrejection", function (event) {
          const reason = event.reason;
          if (
            reason &&
            typeof reason === "object" &&
            reason.message &&
            reason.message.includes("ResizeObserver")
          ) {
            event.preventDefault();
          }
        });

        // Handle general window errors
        window.addEventListener("error", function (event) {
          if (event.message && event.message.includes("ResizeObserver")) {
            event.preventDefault();
            return false;
          }
        });

        // Add a global error handler for ResizeObserver specifically
        if (typeof ResizeObserver !== "undefined") {
          const OriginalResizeObserver = ResizeObserver;
          window.ResizeObserver = class extends OriginalResizeObserver {
            constructor(callback) {
              super((entries, observer) => {
                try {
                  callback(entries, observer);
                } catch (error) {
                  // Silently handle ResizeObserver errors
                  if (!error.message?.includes("ResizeObserver")) {
                    throw error;
                  }
                }
              });
            }
          };
        }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/client/App.tsx"></script>
  </body>
</html>
